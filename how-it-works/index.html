<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>How it works - My Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "How it works";
        var mkdocs_page_input_path = "how-it-works.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> My Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">How it works</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#model-binding">Model binding</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tracking-binding">Tracking binding</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#array-tracking">Array Tracking</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#jsx-compiler">JSX Compiler</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../elements/">Elements</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../components/">Components</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../behaviors/">Behaviors</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">My Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">How it works</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="how-it-works">How it works</h1>
<p>The framework is an MVVM framework that doesn’t require any ceremony. 
It has no virtual DOM, no special conventions, and doesn’t use hooks. 
The core engine is a template builder that simplifies DOM construction 
associated with a particular model through a fluent API.</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">template</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@eusoft/webapp-core&quot;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">myTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">template</span><span class="p">(</span><span class="nx">t</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">t</span>
<span class="w">    </span><span class="p">.</span><span class="nx">beginChild</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">).</span><span class="kd">class</span><span class="p">(</span><span class="s2">&quot;myClass&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="nx">beginChild</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;a span&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Text&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="nx">endChild</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="nx">beginChild</span><span class="p">(</span><span class="s2">&quot;button&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">ev</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Clicked!&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Click me&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="nx">endChild</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="nx">endChild</span><span class="p">());</span>
</code></pre></div>
<p>that will produce</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;myClass&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;a span&quot;</span><span class="p">&gt;</span>Text<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">click</span><span class="o">=</span><span class="s">&quot;console.log(&quot;</span><span class="na">Clicked</span><span class="err">!&quot;)&quot;</span><span class="p">&gt;</span>Click me<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<p>The template can be mounted using the <code>mount</code> function, 
specifying the DOM element or selector and the template itself.</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">mount</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@eusoft/webapp-core&quot;</span><span class="p">;</span>

<span class="nx">mount</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">myTemplate</span><span class="p">);</span>
<span class="nx">mount</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span><span class="w"> </span><span class="nx">myTemplate</span><span class="p">);</span>
<span class="nx">mount</span><span class="p">(</span><span class="s2">&quot;#myRootElementId&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">myTemplate</span><span class="p">);</span>
</code></pre></div>
<h2 id="model-binding">Model binding</h2>
<p>A template can have a model associated.
Once you have the model, you can create bind expression to associate
a particular value for a template to a model</p>
<p><div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">mount</span><span class="p">,</span><span class="w"> </span><span class="nx">template</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@eusoft/webapp-core&quot;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">IMyModel</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">myTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">template</span><span class="o">&lt;</span><span class="nx">IMyModel</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">t</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">t</span>
<span class="w">    </span><span class="p">.</span><span class="nx">beginChild</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">m</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">m</span><span class="p">.</span><span class="nx">text</span><span class="p">).</span><span class="nx">endChild</span><span class="p">());</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">IMyModel</span><span class="p">;</span>

<span class="nx">mount</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span><span class="w"> </span><span class="nx">myTemplate</span><span class="p">,</span><span class="w"> </span><span class="nx">model</span><span class="p">);</span>

<span class="nx">model</span><span class="p">.</span><span class="nx">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hello word&quot;</span><span class="p">;</span>
</code></pre></div>
Any changes to a model property will be propagated to each binding expression that uses it. In this example, 
the inner text of the span will reflect the value of the <code>text</code> property in the model</p>
<h2 id="tracking-binding">Tracking binding</h2>
<p>Binding expressions can have arbitrary complexity. 
Behind the scenes, a <code>Proxy</code> is created to track the expression and collect all references, even complex ones.</p>
<p>Once all references are collected, each referenced property descriptor is modified 
to make it observable and to provide a notification when the property changes. 
The original descriptor is preserved and called back as needed. 
These observed properties are stored inside the special symbol <code>@props</code> within the object.</p>
<p>In this scenario</p>
<div class="highlight"><pre><span></span><code><span class="nx">model</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">model</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">test</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">model.c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">model.d</span><span class="p">;</span>

<span class="c1">// the old obj and obj.test would be untracked, new obj, obj.test, model.c tracked, and model.d untracked.</span>
<span class="nx">model</span><span class="p">.</span><span class="nx">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">test</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"> </span><span class="p">};</span>

<span class="c1">//no effect, d is not tracked</span>
<span class="nx">model</span><span class="p">.</span><span class="nx">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;new value&#39;</span><span class="p">;</span>

<span class="c1">//model.c untracked and model.d tracked</span>
<span class="nx">model</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
</code></pre></div>
<p>Only when the value of the binding expression really changes (has a new value different from the last one), 
the template will be updated.</p>
<h2 id="array-tracking">Array Tracking</h2>
<p>When a model is represented by an array, the framework automatically tracks changes to both the array and its items. 
It overrides the native array methods so that any modification will trigger updates in the template.</p>
<p>Observed methods include: <code>push</code>, <code>pop</code>, <code>sort</code>, <code>splice</code>, <code>shift</code>, <code>unshift</code>, <code>fill</code>.</p>
<p>A new method, <code>myArray.set(index, value)</code> is also available to change an element’s value directly, since the native array
methods do not support 'observe' this operation. 
To use direct item assignment <code>myArray[index] = value</code>, you can use wrap the array with <code>createObservableArray</code> function to 
create a proxy for the array.</p>
<h2 id="jsx-compiler">JSX Compiler</h2>
<p>WebApp supports JSX syntax through the <code>@eusoft/webapp-jsx</code> package.
A compiler is available to convert JSX code into the framework template builder syntax.
A plugin for Rollup or Vite is available to handle the compilation.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../elements/" class="btn btn-neutral float-right" title="Elements">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../elements/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
